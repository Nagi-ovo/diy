## 3. 整数运算

### 无符号数加法
For $x$ and $y$，$0 \leq x < 2^w, 0 \leq y < 2^w$

$$
x +^u_w y = 
\begin{cases} 
x + y, & \text{if } x + y < 2^w \\
x + y - 2^w, & \text{if } 2^w \leq x + y < 2^{w+1}
\end{cases}
$$
![](storage%20bag/Screenshot%202023-11-08%20at%2014.32.40.png)
> C语言执行过程中，对于溢出的情况不会报错。

可以通过下面的简单程序判断是否发生溢出：
```C
int uadd_ok(unsigned x, unsigned y)
{
	unsigned sum = x + y;
	return sum >= x;
}
```

### 有符号数加法

For $x$ and $y$，$-2^{w-1} \leq x < 2^{w-1} - 1, \quad -2^{w-1} \leq y < 2^{w-1} - 1$

$$
x +^t_w y = 
\begin{cases} 
x + y - 2^w, & \text{if } 2^{w-1} \leq x + y \quad \text{(Positive overflow)} \\
x + y, & \text{if } -2^{w-1} \leq x + y < 2^{w-1} \\
x + y + 2^w, & \text{if } x + y < -2^{w-1} \quad \text{(Negative overflow)}
\end{cases}
$$
> $t$是补码*two's complement*的首字母缩写

### 减法的实现

加法逆元 *addictive inverse*，利用溢出来实现。

无符号逆元：$$
x = 
\begin{cases} 
x, & \text{if } x = 0 \\
2^w - x, & \text{if } x \geq 0
\end{cases}
$$
有符号逆元：
$$
x = 
\begin{cases} 
-x, & \text{if } x > TMin_w \\
{TMin_w}, & \text{if } x = TMin_w
\end{cases}
$$

### 乘法

![](storage%20bag/Screenshot%202023-11-08%20at%2015.30.55.png)

### 除法

可用右移实现，要注意区分逻辑右移和算数右移。

### 取整

*Rounds Toward Zero*
![[storage bag/Screenshot 2023-11-08 at 15.33.07.png]]
