[link](https://www.bilibili.com/video/BV1mi4y137g8/)
# 1. 编译系统

![](storage%20bag/Screenshot%202023-11-03%20at%2010.12.17.png)
> [[../../Coding/C++/Cherno C++/1-50/05 How C++ Works#^bafd29|预处理阶段]]后生成的`.i`文件仍然是文本文件

## 学习编译系统的原因

- 优化程序性能（3、5）

 Q1 : 一个`swtich`语句是否比一连串的`if-else`高效？
 A1 :

 Q2 : 一个函数调用的开销有多大？
 A2 : 

 Q3 : `while`循环比`for`循环更高效吗？
 A3 : 
 
- 理解[[../../Coding/C++/Cherno C++/1-50/07 How the C++ Linker Works#^b042ad|link-time]]出现的错误（7）

Q1 : 静态变量与全局变量的区别？
A1 : 

Q2 : 静态库和动态库的区别？
A2 : 

- 避免安全漏洞（3）
Q3 : 数据和控制信息在程序栈上时如何存储的？
A3 : 

# 2. 计算机硬件
## CPU （6）内存（6）

## I/O（6、10）

![](storage%20bag/Screenshot%202023-11-03%20at%2011.14.12.png) ^730547
> 控制器和适配器的主要区别在于封装方式，功能都是在IO设备和IO总线之间传输数据
## 存储（6）
![[storage%20bag/Screenshot%202023-11-03%20at%2011.10.08.png]]
> 上一层存储设备是下一层存储设备的**高速缓存**(*cache*)

# 3. 操作系统

真正操作硬件的是操作系统

![[storage%20bag/Screenshot%202023-11-03%20at%2011.24.42.png]]

为了操控复杂硬件，操作系统引入了几个抽象概念：

![[storage%20bag/Screenshot%202023-11-06%20at%2021.52.05.png]]
> 文件是对IO设备的抽象;
> 虚拟内存是对内存和磁盘IO的抽象;
> 进程是对处理器、内存以及IO设备的抽象。

![[storage%20bag/Screenshot%202023-11-06%20at%2022.00.24.png]]

![[storage%20bag/Screenshot%202023-11-06%20at%2022.02.38.png]]

![[storage%20bag/Screenshot%202023-11-06%20at%2022.04.22.png]]

## Amdahl's Law

$$S=T_{old}/T_{new}=\frac{1}{(1-\alpha)+\alpha/k}$$
核心思想是：当我们对系统的某一部分进行加速时，被加速部分的**重要性**和**加速程度**是影响整体系统性能的关键因素。

![[storage%20bag/Screenshot%202023-11-06%20at%2022.23.27.png]]

$$\alpha=0.6,k=3,S=\frac{1}{(1-0.6)+0.6/3}=1.67$$

把可加速部分加速到极致时：
$$\alpha=0.6,k\to+\infty,S=\frac{1}{(1-\alpha)}=\frac{1}{(1-0.6)}=2.5$$

一个重要推论是，提高程序性能的一个关键方法是尽量减少那些无法并行化的部分，即减小 $1 - p$ 的值。这个定律对并行计算的设计和优化有重要影响，因为它说明了仅仅增加处理器数量并不总能线性地增加计算性能，尤其是在那些难以并行化的任务上。

# 优化方法
##  Concurrency(并发)和 Parallelism(并行)

### Thread-Level Concurrency(线程级并发)

![[storage%20bag/Screenshot%202023-11-06%20at%2022.40.01.png]]
> 对于一些高性能服务器芯片，单颗芯片集成的CPU数量可以高达几十上百个，通过增加CPU的核心数，可以提高系统的性能。

#### Hyperthreading

超线程，也称同时多线程。

 ### Instruction-Level Parallelism(指令级并行)

现代处理器可以同时执行多条指令的属性称为指令级并行。
一般一条指令需要20个时钟周期，现代处理器采用了非常多的技巧可以同时处理多达100条指令 ，因此近几年的处理器可以保持每个周期2～4条指令的执行效率。

	——第四章《流水线技术》

### Single-Instruction Multiple-Data Parallelism(单指令，多数据并行)

—— 现代处理器拥有特殊的硬件部件，允许一条指令产生多个并行的操作。

*SIMD*多是为了提高处理视频、以及声音这类数据的执行速度。

![[storage%20bag/Screenshot%202023-11-07%20at%2016.12.28.png]]
> 虚拟机是对整个计算机系统的抽象，包括操作系统、处理器以及程序